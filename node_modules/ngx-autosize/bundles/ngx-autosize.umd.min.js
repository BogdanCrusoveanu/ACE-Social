!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-autosize",["exports","@angular/core"],e):e((t=t||self)["ngx-autosize"]={},t.ng.core)}(this,function(t,e){"use strict";var i=function(){function t(t,i){this.element=t,this._zone=i,this.onlyGrow=!1,this.useImportant=!1,this.resized=new e.EventEmitter,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style.overflow="hidden",this._onTextAreaFound())}return Object.defineProperty(t.prototype,"minRows",{set:function(t){this._minRows=t,this.textAreaEl&&(this.textAreaEl.rows=t)},enumerable:!0,configurable:!0}),t.prototype.onInput=function(t){this.adjust()},t.prototype.ngOnDestroy=function(){this._destroyed=!0,this._windowResizeHandler&&window.removeEventListener("resize",this._windowResizeHandler,!1)},t.prototype.ngAfterContentChecked=function(){this.adjust()},t.prototype.ngOnChanges=function(t){this.adjust(!0)},t.prototype._findNestedTextArea=function(){var t=this;this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style.overflow="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(function(){t._findNestedTextArea()},100))},t.prototype._onTextAreaFound=function(){var t=this;this._addWindowResizeHandler(),setTimeout(function(){t.adjust()})},t.prototype._addWindowResizeHandler=function(){var t=this;this._windowResizeHandler=function(t,e,i){void 0===i&&(i=!1);var o;return function(){var n=this,s=arguments,r=function(){o=null,i||t.apply(n,s)},a=i&&!o;clearTimeout(o),o=setTimeout(r,e),a&&t.apply(n,s)}}(function(){t._zone.run(function(){t.adjust()})},200),this._zone.runOutsideAngular(function(){window.addEventListener("resize",t._windowResizeHandler,!1)})},t.prototype.adjust=function(t){if(void 0===t&&(t=!1),!this._destroyed&&this.textAreaEl){var e=this.textAreaEl.value;if(!1===t&&e===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=e,this._oldWidth=this.textAreaEl.offsetWidth;var i=this.textAreaEl.cloneNode(!0),o=this.textAreaEl.parentNode;i.style.width=this.textAreaEl.offsetWidth+"px",i.style.visibility="hidden",i.style.position="absolute",i.textContent=e,o.appendChild(i),i.style.overflow="hidden",i.style.height="auto";var n=i.scrollHeight,s=window.getComputedStyle(i,null);n+=parseInt(s.getPropertyValue("border-top-width")),n+=parseInt(s.getPropertyValue("border-bottom-width"));var r=this.textAreaEl.offsetHeight,a=n>r;if(!1===this.onlyGrow||a){var l=this._getLineHeight(),d=n/l;if(this._minRows&&this._minRows>=d)n=this._minRows*l;else if(this.maxRows&&this.maxRows<=d){var h=this.maxRows*l;n=this.onlyGrow?Math.max(h,r):h,this.textAreaEl.style.overflow="auto"}else this.textAreaEl.style.overflow="hidden";var u=n+"px",p=this.useImportant?"important":"";this.textAreaEl.style.setProperty("height",u,p),this.resized.emit(n)}o.removeChild(i)}},t.prototype._getLineHeight=function(){var t=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(t)&&window.getComputedStyle){var e=window.getComputedStyle(this.textAreaEl);t=parseInt(e.lineHeight,10)}if(isNaN(t)){var i=window.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");t=Math.floor(1.5*parseInt(i.replace("px",""),10))}return t},t.decorators=[{type:e.Directive,args:[{selector:"[autosize]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.NgZone}]},t.propDecorators={minRows:[{type:e.Input}],maxRows:[{type:e.Input}],onlyGrow:[{type:e.Input}],useImportant:[{type:e.Input}],resized:[{type:e.Output}],onInput:[{type:e.HostListener,args:["input",["$event.target"]]}]},t}();var o=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[i],imports:[],exports:[i]}]}],t}();t.AutosizeDirective=i,t.AutosizeModule=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-autosize.umd.min.js.map